{% extends 'partials/base.html' %}
{% load static %}
{% block content %}

<!--Body Content-->
    <div id="page-content">
    	<!--Page Title-->
    	<div class="page section-header text-center">
			<div class="page-title">
        		<div class="wrapper"><h1 class="page-width">Hello! {{request.user|title}}, Welcome to Your Account</h1></div>
      		</div>
		</div>
        <!--End Page Title-->

        <div class="container">
            <div class="row">
                <div class="col-6">

                    
                    <h2>Your Monthly Orders Chart View</h2>
                    <div>
                        <canvas style="height: 200px" id="myChart"></canvas>
                    </div>

                    <br>
                    <br>

                    <h2>Your Orders</h2>
                    <div class="table-responsive-sm">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th class="center">Invoice NO</th>
                                    <th class="center">Date</th>
                                    <th class="center">Status</th>
                                    <th class="center">Paid Status</th>
                                    <th class="center">Total</th>
                                    <th class="center">View</th>
                                </tr>
                            </thead>
                            <tbody>

                                {% for order in orders_list %}
                                <tr>
                                    <td class="center">INVOICE-{{ order.id }}</td>
                                    <td class="center">{{ order.order_date }}</td>
                                    <td class="center">{{ order.product_status|title }}</td>
                                    {% if order.paid_status == True %}
                                        <td class="center" style="color: green"><i class="fa fa-check"></i></td>
                                    {% else %}
                                        <td class="center" style="color: red"><i class="fa fa-times"></i></td>
                                    {% endif %}
                                    <td class="center">${{ order.price }}</td>
                                    <td class="center"><a href="{% url 'core:order-detail' order.id %}">View</a></td>
                                </tr>
                                {% endfor %}

                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="col-6 col-sm-6 col-md-6 col-lg-6">
                	<h2 class="h2">Shipping Addresses</h2>
                    
                    <div>
                        <form class="mb-4 rte-setting border rounded" method="POST"> 
                            {% csrf_token %}
                            <div class="card-header">
                                <h3 class="h3">Add New Address</h3>
                            </div>
                            <br>
                            <div class="row container">
                                <div class="form-group col-md-6">
                                    <input class="form-control" placeholder="Address" required type="text" name="address"/>
                                </div>
                                <div class="form-group col-md-6">
                                    <input class="form-control" placeholder="Mobile No" required type="text" name="mobile"/>
                                </div>
                                <div class="col-md-12">
                                    <button class="btn btn--small btn-black" type="submit" name="submit" value="Sumbit">Save Address</button>
                                </div>
                            </div>
                            <p></p>
                            <br/>
                        </form>
                    </div>

                    <div class="rte-setting border ">
                        <div class="card-header">
                            <h3 class="h3">Shipping Address</h3>
                        </div>
                        {% for a in address %}
                        <div class="rte-setting container">
                            <br/>
                            <h2 class="h2"><strong>Address {{ forloop.counter}}</strong></h2>
                            <br/>
                            <p><strong>Address: </strong>{{ a.address }}</p>
                            <p><strong>Mobile No: </strong>{{ a.mobile }}</p>
                            {% comment %} <p>{{a.id}}</p> {% endcomment %}

                            {% if a.status %}
                                <i data-address-id="{{ a.id }}" class="fa fa-check check{{ a.id }} check"></i>
                                <button style="display:none" data-address-id="{{ a.id }}" class="btn btn--small make-default-address button{{ a.id }} action_btn">Make Default</button> 
                            {% else %}
                                <i data-address-id="{{ a.id }}" style="display:none" class="fa fa-check check{{ a.id }} check"></i>
                                <button data-address-id="{{ a.id }}" class="btn btn--small make-default-address button{{ a.id }} action_btn">Make Default</button>
                            {% endif %}                      
                            <hr>
                        </div>
                        {% endfor %}
                    </div>

                </div>
            </div>
        </div>

    </div>
<!--End Body Content-->



<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const labels = {{ month|safe }}

  const data = {
    labels: labels,
    datasets: [{
        label:'Order Count',
        backgroundColor: 'rgb(0, 0, 0)',
        borderColor: 'rgb(0, 0, 0)',
        data: {{ total_orders|safe }}
    }]
  };

  const config = {
    type: 'bar',
    data: data,
    options: {}
  };


  const myChart = new Chart(
    document.getElementById('myChart'),
    config
  );

</script>


{% endblock content %}